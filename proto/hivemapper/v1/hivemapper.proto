syntax = "proto3";

package hivemapper.types.v1;

message Output {
  oneof PaymentType {
      TokenSplittingPayments token_splitting_payments = 1;
      DriverPayments driver_payments = 2;
      DriverFoundationPayments driver_foundation_payments = 3;
      AiTrainerPayments ai_trainer_payments = 4;
      Transfers transfers = 5;
      Mints mints = 6;
      Burns burs = 7;
      TransferCheckeds transfer_checks = 8;
      MintToCheckeds mint_to_checks = 9;
      BurnCheckeds burn_checks = 10;
  }
}

message TokenSplittingPayments {
  repeated TokenSplittingPayment payments = 1;
}

message TokenSplittingPayment {
  Payment manager = 1;
  Payment driver = 2;
}

message DriverPayments {
  repeated DriverPayment rewards = 1;
}

message DriverPayment {
  enum DRIVER_TYPE {
    UNSET = 0;
    REGULAR = 1; // Someone not part of a fleet
    NO_SPLIT = 2; // We can't know if it's a manager or a fleet member at this point
  }

  Payment payment = 1;
  DRIVER_TYPE type = 2;
}

message DriverFoundationPayments {
  repeated DriverFoundationPayment rewards = 1;
}

message DriverFoundationPayment {
  Payment payment = 1;
}

message AiTrainerPayments {
  repeated AiTrainerPayment payments = 1;
}

message AiTrainerPayment {
  Payment payment = 1;
}

message Payment {
  int64 timestamp = 1;
  string transaction_id = 2;
  string address = 3;
  double amount = 4;
}

message Transfers {
  repeated Transfer transfers = 1;
}

message Transfer {
  string trx_id = 1;
  int64 timestamp = 2;
  string from = 3;
  string to = 4;
  double amount = 5;
}

message Mints {
  repeated Mint mints = 1;
}

message Mint {
  string trx_id = 1;
  int64 timestamp = 2;
  string to = 4;
  int64 amount = 5;
}

message Burns {
  repeated Burn burns = 1;
}

message Burn {
  string trx_id = 1;
  int64 timestamp = 2;
  string from = 3;
  int64 amount = 5;
}

message TransferCheckeds {
  repeated TransferChecked transfer_checkeds = 1;
}

message TransferChecked {
  string trx_id = 1;
  int64 timestamp = 2;
  string from = 3;
  string to = 4;
  double amount = 5;
  int32 decimals = 6;
}

message MintToCheckeds {
  repeated MintToChecked mint_checkeds = 1;
}

message MintToChecked {
  string trx_id = 1;
  int64 timestamp = 2;
  string to = 4;
  int64 amount = 5;
  int32 decimals = 6;
}

message BurnCheckeds {
  repeated BurnChecked burn_checkeds = 1;
}

message BurnChecked {
  string trx_id = 1;
  int64 timestamp = 2;
  string from = 3;
  int64 amount = 5;
  int32 decimals = 6;
}